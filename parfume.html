<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calibre Parfum</title>
<link rel="stylesheet" href="parfume.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  </head>
  <body>
    <!-- Header Section -->
    <header id="header">
      <div class="logo">
        <img src="./assets/Calibre.png" alt="" />
      </div>
      <div class="menu-toggle" id="menu-toggle">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="nav-links" id="nav-links">
        <ul>
          <li><a href="#home">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
          <li><a href="#products">Products</a></li>
        </ul>
      </div>
    </header>
    
<!-- Home Section -->
    <section id="home" class="section">
      <div class="slider-container">
        <div class="slider">
          <div class="slide">
            <img src="./assets/1.jpg" alt="Image 1" />
          </div>
          <div class="slide">
            <img src="./assets/2.jpg" alt="Image 2" />
          </div>
          <div class="slide">
            <img src="./assets/3.jpg" alt="Image 3" />
          </div>
        </div>
        <span class="prev" onclick="moveSlide(-1)"><i class="fa-solid fa-chevron-left"></i></span>
        <span class="next" onclick="moveSlide(1)"><i class="fa-solid fa-chevron-right"></i></i></span>
      </div>
    </section>

<!-- About Sesction -->
<section id="about" class="about-section">
  <div class="container">
      <h2 class="section-title">About Us</h2>
      <p class="section-description">We are a team that passionately directs the world of perfumes, with each perfume having a story behind it. We create the most elegant fragrances from natural and high-quality ingredients, exploring until we find the perfume that impresses you.</p>

      <div class="team">
          <div class="team-member">
              <img src="./assets/Ali.jpg" alt="Perfume Designer" class="team-photo">
              <h3 class="team-name">Ali Ahmadov</h3>
              <p class="team-role">Founder</p>
          </div>
      </div>
  </div>
</section>
    
<!-- Contact Section -->
<section id="contact" class="contact-section">
  <div class="container">
    <h2 class="section-title">Contact Us</h2>
    <p class="section-description">We would love to hear from you! Whether you have questions, feedback, or just want to say hello, feel free to reach out.</p>

    <!-- İletişim Formu -->
    <form class="contact-form">
      <div class="form-group">
        <label for="name">Your Name:</label>
        <input type="text" id="name" placeholder="Enter your name" required />
      </div>
      <div class="form-group">
        <label for="email">Your Email:</label>
        <input type="email" id="email" placeholder="Enter your email" required />
      </div>
      <div class="form-group">
        <label for="message">Your Message:</label>
        <textarea id="message" placeholder="Write your message here" required></textarea>
      </div>
      <button type="submit" class="submit-btn">Send Message</button>
    </form>

    <!-- Sosyal Medya Bağlantıları -->
    <div class="social-links">
      <p>Follow us on:</p>
      <a href="#" class="social-icon facebook"><i class="fab fa-facebook"></i></a>
      <a href="#" class="social-icon instagram"><i class="fab fa-instagram"></i></a>
      <a href="#" class="social-icon twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" class="social-icon pinterest"><i class="fab fa-pinterest"></i></a>
    </div>
  </div>
</section>
    
<!-- Product Section -->
<section id="products" class="product-section">
  <h2>Our Products</h2>
  <p class="section-description">Discover our exquisite range of perfumes crafted with passion and precision. Each fragrance tells a unique story, waiting for you to explore.</p>

  <!-- Kategoriyi Seçmek İçin Filtreleme Dropdown Menüsü -->
  <div class="filter-container">
    <label for="category-select">Choose a category:</label><br>
    <select id="category-select">
      <option value="all">All Products</option>
      <option value="men">Men's Perfumes</option>
      <option value="women">Women's Perfumes</option>
    </select>
  </div>
  <!-- Product Cards Container -->
  <div id="product-cards" class="product-cards-container">
    <!-- Product Cards will be dynamically inserted here -->
  </div>
</section>
<!-- Shopping Cart Section -->
<section id="cart" class="cart-section" style="display: none;">
  <h2>Sifariş</h2>
  <button id="close-cart-btn" class="close-cart-btn">X</button>
  <div id="cart-items" class="cart-items-container">
    <!-- Cart items will be dynamically inserted here -->
  </div>
  <button id="checkout-btn" class="checkout-btn">Sifarişi təsdiqlə</button>
  <div id="cart-empty-message" class="empty-message">Sifariş yoxdur.</div>
</section>

<!-- Modal Pencere -->
<div id="modal" class="modalWindow">
  <div class="modal-content">
    <span id="modal-close" class="close">&times;</span>
    <p id="modal-message"></p>
  </div>
</div>



<!-- Footer Section -->
<footer class="footer">
  <div class="footer-content">
      <div class="footer-left">
          <p>&copy; 2024 CALIBRE.AZ - All Rights Reserved</p>
      </div>
      <div class="footer-center">
          <p>Bringing Luxury Scents to Your Life</p>
      </div>
      <div class="footer-right">
          <ul>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms of Service</a></li>
              <li><a href="#">Contact Us</a></li>
          </ul>
      </div>
  </div>
  <div class="footer-bottom">
      <p>Crafted with love, elegance, and precision.</p>
  </div>
</footer>


<script>
  // Modal Pencereler
const modal = document.getElementById('modal');
const modalMessage = document.getElementById('modal-message');
const modalCloseButton = document.getElementById('modal-close');

// Modal'ı gösterme fonksiyonu
function showModalWindow(message) {
    modalMessage.textContent = message;  
    modal.style.display = 'block';  
    setTimeout(function() {
        modal.style.display = 'none';
    }, 2000);
}

// Modal'ı kapama fonksiyonu
modalCloseButton.addEventListener('click', function() {
    modal.style.display = 'none';  // Modal'ı gizle
});

// Modal dışında bir yere tıklandığında modal'ı kapama
window.addEventListener('click', function(event) {
    if (event.target === modal) {
        modal.style.display = 'none';  // Modal'ı gizle
    }
});
// Toggle Menu
const menuToggle = document.getElementById('menu-toggle');
const navLinks = document.getElementById('nav-links');
const menuLinks = document.querySelectorAll('.nav-links a');


menuToggle.addEventListener('click', () => {
    navLinks.classList.toggle('active');
});

menuLinks.forEach(link => {
    link.addEventListener('click', () => {
        navLinks.classList.remove('active');
    });
});

window.addEventListener('scroll', function () {
    const header = document.getElementById('header');

    // Eğer ekran genişliği 768px'den küçükse, işlevi durdur
    if (window.innerWidth > 768) {
        if (window.scrollY > 50) {
            header.classList.add('scrolled');
        } else {
            header.classList.remove('scrolled');
        }
    }
});

// Smooth Scroll
  // Custom smooth scrolling function
  function slowScrollTo(target, duration) {
    const targetPosition = target.offsetTop;
    const startPosition = window.pageYOffset;
    const distance = targetPosition - startPosition;
    let startTime = null;

    // Animation function
    function animation(currentTime) {
      if (startTime === null) startTime = currentTime;
      const timeElapsed = currentTime - startTime;
      const run = ease(timeElapsed, startPosition, distance, duration);
      window.scrollTo(0, run);
      if (timeElapsed < duration) {
        requestAnimationFrame(animation);
      }
    }

    // Easing function for smooth deceleration
    function ease(t, b, c, d) {
      const ts = (t/=d)*t;
      const tc = ts*t;
      return b+c*(tc + -3*ts + 3*t);
    }

    // Start the animation
    requestAnimationFrame(animation);
  }

  // Attach slow scroll to each link
  const links = document.querySelectorAll('.nav-links a');
  links.forEach(link => {
    link.addEventListener('click', (event) => {
      event.preventDefault();
      const targetId = link.getAttribute('href').substring(1);
      const target = document.getElementById(targetId);
      slowScrollTo(target, 1500); // 1500ms duration for smooth scroll
    });
  });


// Dinamik Ürünler


// Function to fetch products and display them
async function fetchProducts() {
    const token = "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"; 
    const repoOwner = "ferhadsultan98";
    const repoName = "infos";
    const filePath = "projects.json"; 
    const url = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`;

    try {
        const response = await fetch(url, {
            headers: {
                'Authorization': `token ${token}`,
            },
        });

        const data = await response.json();
        if (data.content) {
            const decodedContent = atob(data.content);
            const products = JSON.parse(decodedContent) || [];

            // Get selected category
            const selectedCategory = document.getElementById('category-select').value;

            // Filter products by selected category
            const filteredProducts = selectedCategory === 'all'
                ? products
                : products.filter(product => product.category === selectedCategory);

            // Display the products in the product-cards container
            displayProducts(filteredProducts);
        }
    } catch (error) {
        console.error("Error fetching products:", error);
    }
}

// Function to display products
let cart = [];  // Sepetteki ürünlerin listesini tutacak

// Sepeti kapatma fonksiyonu
document.getElementById("close-cart-btn").addEventListener("click", function() {
    const cartSection = document.getElementById("cart");
    cartSection.style.display = "none"; // Sepeti gizle
});

// Sepeti açma fonksiyonu
function openCart() {
    const cartSection = document.getElementById("cart");
    cartSection.style.display = "block"; // Sepeti göster
}

function updateCart() {
    const cartItemsContainer = document.getElementById("cart-items");
    cartItemsContainer.innerHTML = ''; // Sepeti temizle

    cart.forEach(product => {
        const cartItem = document.createElement("div");
        cartItem.classList.add("cart-item");

        // Fiyat ve miktar kontrolü
        const price = parseFloat(product.price);
        const quantity = product.quantity;
        
        if (isNaN(price) || isNaN(quantity)) {
            console.error("Invalid price or quantity", product);
        }

        // Toplam fiyatı hesapla (fiyat ve miktar geçerliyse)
        const totalPrice = (isNaN(price) || isNaN(quantity)) ? 0 : price * quantity;

        cartItem.innerHTML = `
            <img src="${product.image}" alt="${product.name}" class="cart-item-image" />
            <div class="cart-item-info">
                <h4>${product.name}</h4>
                <p>Quantity: ${quantity}</p>
                <p>Price: ${totalPrice.toFixed(2)}</p>
            </div>
        `;

        cartItemsContainer.appendChild(cartItem);
    });

    // Sepet görünürlüğünü kontrol et
    const cartSection = document.getElementById("cart");
    cartSection.style.display = cart.length > 0 ? "block" : "none"; 

    // Sepet boşsa mesajı göster
    const emptyMessage = document.getElementById("cart-empty-message");
    if (emptyMessage) {
        emptyMessage.classList.toggle("show", cart.length === 0); 
    }
}

// Ürünleri sepete ekleme ve sepeti açma
function addToCart(product) {
    // Sepette bu ürün zaten varsa, miktarını arttır
    const existingProduct = cart.find(item => item.id === product.id);
    if (existingProduct) {
        existingProduct.quantity += 1; // Miktarı bir arttır
    } else {
        cart.push({...product, quantity: 1}); // Yeni ürün ekle, miktar 1
    }

    updateCart(); // Sepeti güncelle
}

// "Buy Now" butonuna tıklama işlemi
function handleBuyNow(product) {
    // "Buy Now" butonunda ürün miktarını 1 arttır
    addToCart(product);
}

// "Checkout" butonuna tıklama işlemi
document.getElementById("checkout-btn").addEventListener("click", function() {
   showModalWindow("Proceeding to checkout...");
});

// Ürünleri görüntüleme
function displayProducts(products) {
    const productContainer = document.getElementById("product-cards");
    productContainer.innerHTML = ''; // Mevcut ürünleri temizle

    products.forEach(product => {
        const productCard = document.createElement("div");
        productCard.classList.add("product-card");

        // HTML içeriği oluşturuluyor
        productCard.innerHTML = `
            <img src="${product.image}" alt="${product.name}" />
            <div class="card-info">
                <h3>${product.name}</h3>
                <p class="qiymet">${product.price}</p>
                <p>${product.discount || 'N/A'}</p>
                <button class="buy-now">Buy Now</button>
            </div>
        `;

        // "Buy Now" butonuna tıklanması için event listener ekle
        const buyNowButton = productCard.querySelector(".buy-now");
        buyNowButton.addEventListener("click", function() {
            handleBuyNow(product); // Burada product doğru şekilde iletiliyor
        });

        productContainer.appendChild(productCard);
    });
}

// Order Please
document.getElementById("checkout-btn").addEventListener("click", async function() {
    const orderData = JSON.stringify(cart, null, 2); // Sepetteki veriyi JSON formatında al
    const token = "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"; // GitHub token
    const repoOwner = "ferhadsultan98";  // GitHub repository sahibi
    const repoName = "infos";  // Repository adı
    const filePath = "order.json";  // Güncellenecek dosya yolu
    const branch = "main";  // Hedef şube

    try {
        // 1. GitHub API'sinden mevcut dosyanın SHA bilgisini al
        const response = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`, {
            method: "GET",
            headers: {
                "Authorization": `token ${token}`,
                "Content-Type": "application/json"
            }
        });

        if (!response.ok) {
            throw new Error("Error fetching file data");
        }

        const data = await response.json();

        // Eğer dosya boşsa (content olmayabilir), o zaman empty array kullan
        let currentData = data.content ? JSON.parse(atob(data.content)) : [];
        

        // 2. Sipariş verisini mevcut verilere ekle
        const updatedData = [...currentData, ...JSON.parse(orderData)];

        // 3. Dosyayı güncellemek için PUT isteği gönder
        const updateResponse = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`, {
            method: "PUT",
            headers: {
                "Authorization": `token ${token}`,
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                message: "Add new order data to order.json",  // Commit mesajı
                content: btoa(JSON.stringify(updatedData, null, 2)),  // Yeni veri base64 ile şifrele
                sha: data.sha,  // Eski dosyanın sha değeri
                branch: branch  // Hedef şube
            })
        });

        if (!updateResponse.ok) {
            throw new Error("Error updating file data");
        }

        const updateData = await updateResponse.json();
        if (updateData.commit) {
            console.log("Sipariş GitHub'a başarıyla gönderildi!");
        } else {
            console.log("Sipariş gönderilirken hata oluştu.");
        }
    } catch (error) {
        console.error("Hata oluştu:", error);
        alert("Sipariş kaydedilirken bir hata oluştu.");
    }
});

// Ürünleri sayfa yüklendiğinde getir
window.onload = fetchProducts;

// Kategori seçildiğinde ürünleri filtrele
document.getElementById("category-select").addEventListener("change", fetchProducts);








// Slider
let currentIndex = 0;

const slides = document.querySelectorAll('.slide');
const totalSlides = slides.length;

function showSlide(index) {
    if (index >= totalSlides) {
        currentIndex = 0;
    } else if (index < 0) {
        currentIndex = totalSlides - 1;
    } else {
        currentIndex = index;
    }

    const slider = document.querySelector('.slider');
    slider.style.transform = `translateX(-${currentIndex * 100}%)`;
}

function moveSlide(step) {
    showSlide(currentIndex + step);
}

setInterval(() => {
    showSlide(currentIndex + 1);
}, 3000);  // Slide interval in milliseconds

showSlide(currentIndex);  // Initialize the first slide
// Bu basit JavaScript animasyonu, sayfa tamamen yüklendiğinde animasyonları tetiklemeyi sağlar
document.addEventListener("DOMContentLoaded", function () {
    const sectionTitle = document.querySelector(".section-title");
    const sectionDescription = document.querySelector(".section-description");
    const teamMembers = document.querySelectorAll(".team-member");

    sectionTitle.classList.add("fade-in");
    sectionDescription.classList.add("fade-in");
    teamMembers.forEach(member => member.classList.add("team-slide-in"));
});

// Formu gönderme ve basit doğrulama işlemi
document.querySelector('.contact-form').addEventListener('submit', function (e) {
    e.preventDefault(); // Sayfa yenilenmesini engelle

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const message = document.getElementById('message').value;

    if (name && email && message) {
        console.log('Thank you for contacting us, ' + name + '! We will get back to you soon.');
    } else {
        console.log('Please fill out all fields before submitting.');
    }
});
// Admin paneline yönlendirme (sadece /admin path'inde)
if (window.location.pathname === '/admin') {
    window.location.href = '/adminpanel.html'; 
}
</script>
  </body>
</html>
